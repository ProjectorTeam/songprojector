swagger: '2.0'
info:
  description: This is Song projector Middleware service.
  version: 1.0.0
  title: Song projector Middleware service
  contact:
    email: songprojector@gmail.com
  license:
    name: MIT License
    url: http://opensource.org/licenses/MIT
host: localhost:8080
basePath: /
tags:
  - name: playlists
    description: Playlist Controller
  - name: songs
    description: Song Controller
  - name: tags
    description: Tag Controller
  - name: users
    description: Operations about users
paths:
  /playlists:
    get:
      tags:
        - playlists
      summary: Returns all playlists
      operationId: getAllUsingGET
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/PlaylistSimpleDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '404':
          description: Playlist not found
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      tags:
        - playlists
      summary: Creates new playlist
      operationId: createPlaylistUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: playlistDTO
          description: Song
          required: false
          schema:
            $ref: '#/definitions/PlaylistDTO'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/PlaylistDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
  /playlists/{playlistId}:
    get:
      tags:
        - playlists
      summary: Returns a specific playlist
      operationId: getPlaylistUsingGET
      produces:
        - '*/*'
      parameters:
        - name: playlistId
          in: path
          description: playlistId
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/PlaylistDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '404':
          description: Playlist not found
        '409':
          description: Playlist and user don't belong to the same organization
      security:
        - Authorization:
            - global
      deprecated: false
    put:
      tags:
        - playlists
      summary: Updates a specific playlist
      operationId: updatePlaylistUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: playlistDTO
          description: Song
          required: false
          schema:
            $ref: '#/definitions/PlaylistDTO'
        - name: playlistId
          in: path
          description: playlistId
          required: true
          type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '404':
          description: Playlist not found
        '409':
          description: Playlist and user don't belong to the same organization
      security:
        - Authorization:
            - global
      deprecated: false
    delete:
      tags:
        - playlists
      summary: Deletes a specific playlist
      operationId: deletePlaylistUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: playlistId
          in: path
          description: playlistId
          required: true
          type: string
      responses:
        '204':
          description: No Content
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '404':
          description: Playlist not found
        '409':
          description: Playlist and user don't belong to the same organization
      security:
        - Authorization:
            - global
      deprecated: false
  /songs:
    get:
      tags:
        - songs
      summary: Search songs by name or tags or lyrics
      operationId: searchSongsUsingGET
      produces:
        - '*/*'
      parameters:
        - name: lyrics
          in: query
          description: lyrics
          required: false
          type: string
        - name: name
          in: query
          description: name
          required: false
          type: string
        - name: page
          in: query
          description: page
          required: false
          type: integer
          default: 0
          format: int32
        - name: size
          in: query
          description: size
          required: false
          type: integer
          default: 200
          format: int32
        - name: tags
          in: query
          description: tags
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/SongPageDTO«SongSimpleDTO»'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      tags:
        - songs
      summary: Creates new song
      operationId: createSongUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: songDTO
          description: Song
          required: false
          schema:
            $ref: '#/definitions/SongDTO'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/SongDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
  /songs/dual-display:
    post:
      tags:
        - songs
      summary: Imports song from DualDisplay archive
      operationId: importDualDisplayUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/SongDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
  /songs/{songId}:
    get:
      tags:
        - songs
      summary: Returns a specific song
      operationId: getSongUsingGET
      produces:
        - '*/*'
      parameters:
        - name: songId
          in: path
          description: songId
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/SongDTO'
        '401':
          description: Unauthorized
        '404':
          description: Song not found
        '409':
          description: User and song not in the same organization
      security:
        - Authorization:
            - global
      deprecated: false
    put:
      tags:
        - songs
      summary: Updates a song
      operationId: updateSongUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: songDTO
          description: Song
          required: false
          schema:
            $ref: '#/definitions/SongDTO'
        - name: songId
          in: path
          description: songId
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/SongDTO'
        '401':
          description: Invalid username/password supplied
        '409':
          description: Conflicting user and song organizations
      security:
        - Authorization:
            - global
      deprecated: false
    delete:
      tags:
        - songs
      summary: Deletes a specific song
      operationId: deleteSongUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: songId
          in: path
          description: songId
          required: true
          type: string
      responses:
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '404':
          description: Song not found
        '409':
          description: User and song not in the same organization
      security:
        - Authorization:
            - global
      deprecated: false
  /tags:
    get:
      tags:
        - tags
      summary: Returns all tags
      operationId: getAllUsingGET_1
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/TagDTO'
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      tags:
        - tags
      summary: Creates new tag
      operationId: createTagUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: tagDTO
          description: Tag
          required: false
          schema:
            $ref: '#/definitions/TagDTO'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/TagDTO'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
  /tags/{tagId}:
    get:
      tags:
        - tags
      summary: Returns a specific tag
      operationId: getTagUsingGET
      produces:
        - '*/*'
      parameters:
        - name: tagId
          in: path
          description: Tag id
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/TagDTO'
        '401':
          description: Unauthorized
        '404':
          description: Tag not found
        '409':
          description: Tag and user don't belong to the same organizations
      security:
        - Authorization:
            - global
      deprecated: false
    put:
      tags:
        - tags
      summary: Updates a specific tag
      operationId: updateTagUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: tagDTO
          description: Tag
          required: false
          schema:
            $ref: '#/definitions/TagDTO'
        - name: tagId
          in: path
          description: Tag id
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            type: object
        '401':
          description: Unauthorized
        '404':
          description: Tag not found
        '409':
          description: Tag and user don't belong to the same organizations
      security:
        - Authorization:
            - global
      deprecated: false
    delete:
      tags:
        - tags
      summary: Deletes a specific tag
      operationId: deleteTagUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: tagId
          in: path
          description: Tag id
          required: false
          type: string
      responses:
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '404':
          description: Tag not found
        '409':
          description: Tag and user don't belong to the same organizations
      security:
        - Authorization:
            - global
      deprecated: false
  /users/change-password:
    post:
      tags:
        - users
      summary: Change the password
      operationId: changePasswordUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: changePasswordDTO
          description: Change password
          required: false
          schema:
            $ref: '#/definitions/ChangePasswordDTO'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/ResponseEntity'
        '404':
          description: Code not found
      security:
        - Authorization:
            - global
      deprecated: false
  /users/codes:
    post:
      tags:
        - users
      summary: Creates invitation code
      operationId: createcodeUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: email
          description: email
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Created
        '401':
          description: Unauthorized
      security:
        - Authorization:
            - global
      deprecated: false
  /users/me:
    get:
      tags:
        - users
      summary: Returns current user's data
      operationId: whoamiUsingGET
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/UserResponseDTO'
        '400':
          description: Something went wrong
        '403':
          description: Access denied
        '500':
          description: Expired or invalid JWT token
      security:
        - Authorization:
            - global
        - apiKey: []
      deprecated: false
  /users/refresh:
    post:
      tags:
        - users
      summary: Refreshes the Access token
      operationId: refreshUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: refreshToken
          description: Refresh Token
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/TokenDTO'
        '401':
          description: Invalid refresh token
      security:
        - Authorization:
            - global
      deprecated: false
  /users/reset-password:
    post:
      tags:
        - users
      summary: Resets password by sending a password code to the specified mail
      operationId: resetPasswordUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: email
          description: email
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/ResponseEntity'
        '404':
          description: Email not found
      security:
        - Authorization:
            - global
      deprecated: false
  /users/signin:
    post:
      tags:
        - users
      summary: Authenticates user and returns Access token and Refresh token
      operationId: loginUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: loginData
          description: Signup User
          required: false
          schema:
            $ref: '#/definitions/LoginDataDTO'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/TokenDTO'
        '400':
          description: Something went wrong
        '401':
          description: Invalid username/password supplied
      security:
        - Authorization:
            - global
      deprecated: false
  /users/signup:
    post:
      tags:
        - users
      summary: Creates user and returns Access token and Refresh token
      operationId: signupUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: user
          description: Signup User
          required: false
          schema:
            $ref: '#/definitions/UserDataDTO'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/TokenDTO'
        '400':
          description: Something went wrong
        '409':
          description: Username is already in use
      security:
        - Authorization:
            - global
      deprecated: false
  /users/{username}:
    get:
      tags:
        - users
      summary: Returns specific user by username
      operationId: searchUsingGET
      produces:
        - '*/*'
      parameters:
        - name: username
          in: path
          description: Username
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/UserResponseDTO'
        '400':
          description: Something went wrong
        '401':
          description: Unauthorized
        '404':
          description: The user doesn't exist
        '500':
          description: Expired or invalid JWT token
      security:
        - Authorization:
            - global
        - apiKey: []
      deprecated: false
    delete:
      tags:
        - users
      summary: Deletes specific user by username
      operationId: deleteUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: username
          in: path
          description: Username
          required: false
          type: string
      responses:
        '204':
          description: No Content
          schema:
            type: string
        '400':
          description: Something went wrong
        '401':
          description: Unauthorized
        '404':
          description: The user doesn't exist
        '500':
          description: Expired or invalid JWT token
      security:
        - Authorization:
            - global
        - apiKey: []
      deprecated: false
securityDefinitions:
  Authorization:
    type: apiKey
    name: Authorization
    in: header
definitions:
  ChangePasswordDTO:
    type: object
    properties:
      code:
        type: string
      password:
        type: string
    title: ChangePasswordDTO
  LoginDataDTO:
    type: object
    properties:
      username:
        type: string
      password:
        type: string
    title: LoginDataDTO
  PlaylistDTO:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      songs:
        type: array
        items:
          $ref: '#/definitions/SongForPlaylistDTO'
    title: PlaylistDTO
  PlaylistSimpleDTO:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
    title: PlaylistSimpleDTO
  ResponseEntity:
    type: object
    properties:
      body:
        type: object
      statusCode:
        type: string
        enum:
          - 100 CONTINUE
          - 101 SWITCHING_PROTOCOLS
          - 102 PROCESSING
          - 103 CHECKPOINT
          - 200 OK
          - 201 CREATED
          - 202 ACCEPTED
          - 203 NON_AUTHORITATIVE_INFORMATION
          - 204 NO_CONTENT
          - 205 RESET_CONTENT
          - 206 PARTIAL_CONTENT
          - 207 MULTI_STATUS
          - 208 ALREADY_REPORTED
          - 226 IM_USED
          - 300 MULTIPLE_CHOICES
          - 301 MOVED_PERMANENTLY
          - 302 FOUND
          - 302 MOVED_TEMPORARILY
          - 303 SEE_OTHER
          - 304 NOT_MODIFIED
          - 305 USE_PROXY
          - 307 TEMPORARY_REDIRECT
          - 308 PERMANENT_REDIRECT
          - 400 BAD_REQUEST
          - 401 UNAUTHORIZED
          - 402 PAYMENT_REQUIRED
          - 403 FORBIDDEN
          - 404 NOT_FOUND
          - 405 METHOD_NOT_ALLOWED
          - 406 NOT_ACCEPTABLE
          - 407 PROXY_AUTHENTICATION_REQUIRED
          - 408 REQUEST_TIMEOUT
          - 409 CONFLICT
          - 410 GONE
          - 411 LENGTH_REQUIRED
          - 412 PRECONDITION_FAILED
          - 413 PAYLOAD_TOO_LARGE
          - 413 REQUEST_ENTITY_TOO_LARGE
          - 414 URI_TOO_LONG
          - 414 REQUEST_URI_TOO_LONG
          - 415 UNSUPPORTED_MEDIA_TYPE
          - 416 REQUESTED_RANGE_NOT_SATISFIABLE
          - 417 EXPECTATION_FAILED
          - 418 I_AM_A_TEAPOT
          - 419 INSUFFICIENT_SPACE_ON_RESOURCE
          - 420 METHOD_FAILURE
          - 421 DESTINATION_LOCKED
          - 422 UNPROCESSABLE_ENTITY
          - 423 LOCKED
          - 424 FAILED_DEPENDENCY
          - 425 TOO_EARLY
          - 426 UPGRADE_REQUIRED
          - 428 PRECONDITION_REQUIRED
          - 429 TOO_MANY_REQUESTS
          - 431 REQUEST_HEADER_FIELDS_TOO_LARGE
          - 451 UNAVAILABLE_FOR_LEGAL_REASONS
          - 500 INTERNAL_SERVER_ERROR
          - 501 NOT_IMPLEMENTED
          - 502 BAD_GATEWAY
          - 503 SERVICE_UNAVAILABLE
          - 504 GATEWAY_TIMEOUT
          - 505 HTTP_VERSION_NOT_SUPPORTED
          - 506 VARIANT_ALSO_NEGOTIATES
          - 507 INSUFFICIENT_STORAGE
          - 508 LOOP_DETECTED
          - 509 BANDWIDTH_LIMIT_EXCEEDED
          - 510 NOT_EXTENDED
          - 511 NETWORK_AUTHENTICATION_REQUIRED
      statusCodeValue:
        type: integer
        format: int32
    title: ResponseEntity
  SongDTO:
    type: object
    properties:
      id:
        type: string
      lyrics:
        type: array
        items:
          type: string
      name:
        type: string
      tags:
        type: array
        items:
          type: string
    title: SongDTO
  SongForPlaylistDTO:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      songOrder:
        type: integer
        format: int32
    title: SongForPlaylistDTO
  SongPageDTO«SongSimpleDTO»:
    type: object
    properties:
      content:
        type: array
        items:
          $ref: '#/definitions/SongSimpleDTO'
      lastPage:
        type: boolean
      pageNumber:
        type: integer
        format: int32
      pageSize:
        type: integer
        format: int32
      totalSize:
        type: integer
        format: int64
    title: SongPageDTO«SongSimpleDTO»
  SongSimpleDTO:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
    title: SongSimpleDTO
  TagDTO:
    type: object
    properties:
      color:
        type: string
      id:
        type: string
      name:
        type: string
    title: TagDTO
  TokenDTO:
    type: object
    properties:
      accessToken:
        type: string
      refreshToken:
        type: string
    title: TokenDTO
  UserDataDTO:
    type: object
    properties:
      email:
        type: string
      organization:
        type: string
      password:
        type: string
      type:
        type: string
        enum:
          - admin
          - member
      username:
        type: string
    title: UserDataDTO
  UserResponseDTO:
    type: object
    properties:
      id:
        type: string
      username:
        type: string
      email:
        type: string
      userRoles:
        type: array
        items:
          type: string
          enum:
            - ADMIN_ORG
            - MEMBER_ORG
    title: UserResponseDTO
